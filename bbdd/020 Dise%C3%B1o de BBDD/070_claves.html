<!DOCTYPE html>
<html lang="es">
<head>
<title>Claves</title>
<meta charset="utf-8">
<meta http-equiv="last-modified" content="mi√©, 18 oct 2023 00:25:05 GMT">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="http://dww.es/opt/jck/js/DEBUG.js"></script>
<link rel="stylesheet" href="../../opt/jck/css/estilo.css">
</head>
<body>
<article>
<h1>Claves</h1>
<p> En el modelo relacional trabajamos con los siguientes tipos de claves:</p>
<div class="up">
<ul>
  <li>Claves candidatas</li>
  <li>Claves primarias</li>
  <li>Claves alternativas</li>
  <li>Claves ajenas (o for√°neas)</li>
</ul>
</div>
<p>Vamos a suponer que la UCI guarda los datos de los ciclistas federados en una
tabla con los siguientes campos:</p>
<pre>    <span class="bb"><b>Ciclista</b> { num-Federado,  DNI,  fecha-Nacimiento, fecha-Alta-Federaci√≥n,  nombre,
               apellidos,  sexo,  direcci√≥n,  email,  provincia,  club,  categor√≠a  }</span></pre>
<p>La forma de diferenciar a dos ciclistas de manera inequ√≠voca es mediante alg√∫n <b>atributo clave</b>.</p>
<p>Para ello, buscaremos <i>un atributo</i> <b>o</b> un <i>conjunto de atributos</i> que
identifiquen de modo √∫nico las filas de la tabla.
A ese atributo o conjunto de atributos lo llamaremos <b>claves candidatas</b>.</p>
<h3>Claves candidatas</h3>
<p>üëâ Las <b>claves candidatas</b> ser√°n aquel conjunto de atributos que identifiquen
de manera √∫nica cada fila de la tabla. Es decir, cualquier columna cuyos valores
no van a repitir en ninguna otra fila de la tabla, son claves candidatas.</p>
<pre>    <span class="bb"><b>Ciclista</b> { num-Federado,  DNI,  fecha-Nacimiento, fecha-Alta-Federaci√≥n,  nombre,
               apellidos,  sexo,  direcci√≥n,  tel√©fono,  email,  provincia,  club,  categor√≠a  }</span></pre>
<p>En la tabla de ciclistas, claves candidatas ser√≠an el "<i>n√∫mero de federado</i>, el <i>DNI</i> y quiz√°s tambi√©n el <i>email</i> 
y el <i>tel√©fono</i> podr√≠an ser claves candidatas, aunque podr√≠an no serlo si tenemos ciclistas en categor√≠a infantil,
incluso el DNI podr√≠a no serlo.</p>
<h3>Clave primaria</h3>
<p>Al crear la BD tendremos que elegir alguna de las claves candidatas para diferenciar los
registros.</p>
<p>üëâ La <b>clave primaria</b> de un tabla es aquella clave candidata que se escoge
para identificar sus filas de manera √∫nica.</p>
<div class="nota w5">
<p>En una tabla <b>no pueden existir filas duplicadas</b>, por tanto, SIEMPRE EXISTIR√Å una
clave primaria.</p>
</div>
<p>En el peor caso, la clave primaria estar√° formada por todos los atributos
de la relaci√≥n, pero normalmente habr√° un peque√±o subconjunto de los
atributos que haga esta funci√≥n.</p>
<p>En otros casos, podemos crear un campo √∫nico que identifique las filas,
por ejemplo un c√≥digo de usuario, que podr√≠an estar constituidos por
valores autonum√©ricos.</p>
<h3>Claves alternativas</h3>
<p>üëâ Las claves candidatas que no son escogidas como clave primaria son
denominadas <span class="k">claves alternativas</span>.</p>
<h3>Clave compuesta</h3>
<p>üëâ Una clave puede estar formada por m√°s de un atributo. En este se dice que es una <b>clave compuesta</b>.</p>
<p>Ejemplo:</p>
<pre class="up4">           <span class="bb"><b>Localidades</b> { <u>C√≥d_Provincial</u>,  <u>C√≥d_local</u>, Localidad }</span></pre>
<table border="1" class="t0">
  <tr>
    <th>C√≥d_Provincial</th><th>C√≥d_local</th><th>Localidad</th>
  </tr>
  <tr>
    <td>28</td><td>001</td><td>Madrid</td>
  </tr>
  <tr>
    <td>28</td><td>007</td><td>Madrid</td>
  </tr>
  <tr>
    <td>28</td><td>033</td><td>Madrid</td>
  </tr>
  <tr>
    <td>28</td><td>200</td><td>San Lorenzo de El Escorial</td>
  </tr>
  <tr>
    <td>28</td><td>280</td><td>El Escorial</td>
  </tr>
  <tr>
    <td>28</td><td>440</td><td>Guadarrama</td>
  </tr>
  <tr>
    <td>40</td><td>001</td><td>Segovia</td>
  </tr>
  <tr>
    <td>40</td><td>006</td><td>Segovia</td>
  </tr>
  <tr>
    <td>¬∑¬∑¬∑</td><td>¬∑¬∑¬∑</td><td>¬∑¬∑¬∑</td>
  </tr>
</table>
<h3>Claves for√°neas (ajenas o externas)</h3>
<p>En una BD relacional, todas las tablas est√°n relacionadas entre s√≠. Para
establecer una relaci√≥n deben compartir alg√∫n atributo en com√∫n que las
relacione.</p>
<p>Si un ciclista pertenece a un club, el ciclista debe portar entre sus
atributos el nombre (o c√≥digo) del club al que pertenece:</p>
<p><img src="img/E-R_Ciclistas-Clubs.png" class=""></p>
<pre>    <span class="bb"><b>Club</b>  { <span class="b"><u>c√≥digoClub</u></span>, nombre, sede, presidente, tel√©fono }
    <b>Ciclista</b> { <u>numFeder</u>, DNI, fecNac, fechaFeder, nombre, apellidos, sexo, direcci√≥n, tel√©fono,
           email, provincia, <span class="b">club</span>(Club), categor√≠a }</span></pre>
<div class="nota">
<p>La relaci√≥n <span class="b">Club --‚ñ∏ Ciclista</span> es <i>UNO-a-MUCHOS</i>, porque:
<br><span class="tab"><span class="icon"></span>- en un club puede haber <span class="rr">muchos</span> ciclistas</span><br>
<span class="tab"><span class="icon"></span>- un ciclista pertenece a <span class="r">un</span> √∫nico club</span>
</p>
<p>La flecha apuntar√° a la entidad que participa con <span class="rr">"muchos"</span> en la relaci√≥n.<br>
La clave for√°nea viajar√° en direcci√≥n de la flecha.</p>
</div>
<p>üëâ Una <b>clave ajena</b> es un atributo o conjunto de atributos de una tabla
cuyos valores coinciden con los valores de la clave primaria de alguna
otra tabla (o de la misma).<br>&nbsp;</p>
<div class="def">
<p>Vamos a convertir el fichero anterior en una BBDD.</p>
<p><b>Ejercicio 1</b>: Crea una BDD llamada UCI con las dos tablas anteriores:</p>
<pre><span class="bb">  <b>Club</b>  { <u>c√≥digoClub</u>, nombre, sede, presidente, tel√©fono }
  <b>Ciclista</b> { <u>numFeder</u>, DNI, fecNac, fechaFeder, nombre, sexo, direcci√≥n, tel√©fono,
           email, provincia, club(Club), categor√≠a }</span></pre>
<p>Las categor√≠as ser√°n tres: "Amateur", "Profesional", y "M√°ster" (profesional retirado).<br>
Un ciclista s√≥lo podr√° pertenecer a una de las categor√≠as.<br>&nbsp;</p>
<p><b>Ejercicio 2</b>: Inv√©ntate 2 equipos y 7 nombres de ciclista.
Ins√©rtalos en las tablas correspondientes.</p>
</div>
</article>
</body>
</html>